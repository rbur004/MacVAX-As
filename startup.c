#include <types.h>#include <SegLoad.h>#include <Files.h>#include <String.h>#include <Strings.h>#include <StdLib.h>#define _STARTUP_C_#include 	"macio.h"#include	"startup.h"#include 	"aprintf.h"#include 	"asmain.h"#pragma segment STARTUPvoid process_finder_info(void){short message;	/*print or open?*/short count;	/*number of args*/short i;AppFile thefile;MFILE **fileinfo;OSErr error = 0;Handle argvx; Str255 argv0;short argv0_refnum;	GetAppParms(argv0,&argv0_refnum,&argvx);	GetVRefNum(argv0_refnum,&appl_vrefnum);	CountAppFiles(&message,&count);	if(message)	{		aprintf("No Print Option");		exit(0);	}	if( ( fileinfo = (MFILE **) calloc(count,sizeof(MFILE) ) ) == 0 )	{		aprintf("Memory alloc failed.\nUnable to process args");		exit(0);	}	for(i = 1; i <= count; i++)	{		GetAppFiles(i, &thefile );		p2cstr(thefile.fName);		if(thefile.fType == 'TEXT')		{			if((fileinfo[num_files] = mopen_na((char *)&thefile.fName,thefile.vRefNum)) != 0)				num_files++;			else			{				error = 1;				break;			}		}		else		{			aprintf("File %s: type not 'TEXT' ", &thefile.fName);			error = 1;			break;		}	}	if(num_files)	{		if(error == 0)		{			iowprintf ("Don't use the .include compiler directive\n");			vax_assemble( num_files, fileinfo,"file_name" );		}		for(i = 0 ; i < num_files; i++)			mclose(fileinfo[i]);	}}